# Simple HTTP Server in Python

PythonのソケットプログラミングによるシンプルなHTTPサーバー実装です。GET/POSTメソッドに対応し、マルチスレッドで複数のクライアントを処理できます。

## 主な機能

- **HTTPメソッド対応**: GET / POST
- **ルーティング機能**: パスパラメータとクエリパラメータをサポート
- **静的ファイル配信**: HTML、画像、CSS、JavaScriptなどの静的ファイルを提供
- **フォームデータ処理**:
  - `application/x-www-form-urlencoded`
  - `multipart/form-data`（ファイルアップロード対応）
- **マルチスレッド対応**: 複数のクライアント接続を同時処理
- **エラーハンドリング**: 400、404、408、500エラーに対応
- **セキュリティ対策**: パストラバーサル攻撃防止、XSS対策（HTMLエスケープ）

## 技術スタック

- Python 3.x
- 標準ライブラリのみ使用（socket, threading, logging, re, urllib.parse等）

## ファイル構成

```
09_ex29/
├── 09_ex29.py      # メインサーバープログラム
├── http.py         # HTTPリクエストの解析処理
├── route.py        # ルーティングとレスポンス生成
├── error.py        # エラーハンドリング
├── config.py       # サーバー設定
└── static/         # 静的ファイル格納ディレクトリ
    ├── index.html
    ├── about.html
    └── *.jpg
```

## 使い方

```bash
# サーバー起動
cd 09_ex29
python3 09_ex29.py

# ブラウザでアクセス
# http://127.0.0.1:8080
```

## 実装されているエンドポイント

- `GET /` - インデックスページ
- `GET /about` - アバウトページ
- `GET /user/<user_id>` - ユーザーページ（動的パラメータ）
- `GET /search?q=keyword` - 検索ページ（クエリパラメータ）
- `POST /` - フォームデータ処理
- `GET /static/*` - 静的ファイル配信

## 技術的な特徴

### リクエスト処理フロー
1. ソケット通信でHTTPリクエストを受信
2. ヘッダーとボディを分割してパース
3. ルーティングに基づいてハンドラー関数を実行
4. HTTPレスポンスを生成してクライアントに送信

### マルチスレッド処理
各クライアント接続ごとに新しいスレッドを生成し、並行処理を実現しています。

### セキュリティ対策
- 静的ファイル配信時のパストラバーサル攻撃防止
- HTMLエスケープによるXSS対策
- タイムアウト処理（30秒）

## 設定

[config.py](09_ex29/config.py)で以下の設定が可能です：

- `LOCAL_HOST`: バインドするホスト（デフォルト: 127.0.0.1）
- `PORT`: ポート番号（デフォルト: 8080）
- `TIMEOUT_INT`: タイムアウト秒数（デフォルト: 30.0）
- `BUFFER_SIZE`: バッファサイズ（デフォルト: 4096）
- `MAX_READ`: 最大読み込みサイズ（デフォルト: 10MB）

## 学んだこと

- Pythonソケットプログラミングの基礎
- HTTPプロトコルの仕組み（リクエスト/レスポンス構造）
- マルチスレッドプログラミング
- 正規表現を使ったルーティング実装
- セキュリティを考慮したWeb開発